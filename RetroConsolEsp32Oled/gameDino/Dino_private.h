#ifndef DINO_PRIVATE_LIB_H
#define DINO_PRIVATE_LIB_H

  enum AeroState { AeroUp, AeroDown, AeroFall };
  #define OBST_NARROW false
  #define OBST_WIDE true

  struct aeroStr {
    int16_t x;
    int8_t y;
    bool colission = false;
    AeroState state = AeroUp;
  };

  struct obstStr {
    int16_t x;
    bool type = OBST_NARROW;
  };

  struct obstTypeStr {
    uint8_t xColisionRange;
    uint8_t yColisionRange;
    uint8_t width;
    uint8_t height;
  };

  const obstTypeStr ObstParams[2]= {
    {4, 14, 22, 23}, // OBST_NARROW
    {12, 8, 22, 23}  // OBST_WIDE
  };

  struct SpriteSetStr {
    const unsigned char* Jumper1;
    const unsigned char* Jumper2;
    const unsigned char* Jumper3;
    const unsigned char* ObstHigh;
    const unsigned char* ObstWide;
    const unsigned char* Aero1;
    const unsigned char* Aero2;
    const unsigned char* Aero3;
    const char* collisionText;
  };

  extern SpriteSetStr Skins[2];

  struct GameConstStr {
    uint8_t first_obst_x;
    uint8_t new_obst_x_init;
    uint8_t min_obst_dist;
    uint8_t baselineY;
    uint8_t maxspeed;
    uint8_t obst_y; 
    int16_t jumper_foodInit;
    uint8_t jumper_baseX;
    uint8_t jumper_baseY;
    uint8_t jumper_xColRange;
    uint8_t jumper_width;
    uint8_t jumper_height;
    uint8_t jumper_jumpHeight;
    uint8_t aero_width;
    uint8_t aero_height;
    uint8_t aero_initY;
  };

  struct jumpStr {
    int16_t  	y;
    bool state = true;
    bool colision = false;
    int16_t 	food;
    uint8_t 	jump; // 0 - not jumping, 1 - going up, 2 - going down
    bool jumpType = false; // false - long jump, true - high jump
    uint8_t  	jumpStartX;
  };

  struct dGameStr {
    bool    isRect = false;
    uint8_t speed;
    uint8_t sessionScore;
    uint8_t spriteSetIndex = 0;
  };

  void Game_Dino();
  bool CheckIfTreeCollision(dGameStr& DinoGame, jumpStr& Dino, obstStr& tree, const GameConstStr& GameConst);
  void CheckButtons(dGameStr& DinoGame, jumpStr& Dino);
  void CalcAeroXYpos(dGameStr& DinoGame, aeroStr& Aero, const GameConstStr& GameConst);
  void CalcGameSpeed(dGameStr& DinoGame, const GameConstStr& GameConst);
  void CalcTreesXpos (dGameStr& DinoGame, obstStr& obst1, obstStr& obst2, const GameConstStr& GameConst);
  void CheckIfAeroColision(dGameStr& DinoGame, jumpStr& Dino, aeroStr& Aero, const GameConstStr& GameConst);
  void DisplayGameSummary(dGameStr& DinoGame, jumpStr& Dino);
  void DisplayOutOfFoodInfo();
  void DisplayScore(dGameStr& DinoGame, jumpStr& Dino);
  void DisplayWelcomeScreen();
  void FirstGameFrame(dGameStr& DinoGame, jumpStr& Dino, obstStr& obst1, obstStr& obst2, const GameConstStr& GameConst);
  void GameOverTreeColisionDetected(dGameStr& DinoGame,jumpStr& Dino, const GameConstStr& GameConst);
  void GamePause();
  void InitValues();
  void InitValuesAfterReplay(dGameStr& DinoGame, jumpStr& Dino, aeroStr& Aero, obstStr& obst1, obstStr& obst2, const GameConstStr& GameConst);
  void JumpHigh(dGameStr& DinoGame, jumpStr& Dino, const GameConstStr& GameConst);
  void JumpLong(dGameStr& DinoGame, jumpStr& Dino, const GameConstStr& GameConst);
  void JumpSound();
  void MoveAero(dGameStr& DinoGame, aeroStr& Aero, const GameConstStr& GameConst);
  void MoveDino(dGameStr& DinoGame, jumpStr& Dino, const GameConstStr& GameConst);
  void MoveTree(dGameStr& DinoGame, obstStr& tree, const GameConstStr& GameConst);
  void PlayGame (dGameStr& DinoGame, jumpStr& Dino, aeroStr& Aero, obstStr& obst1, obstStr& obst2, const GameConstStr& GameConst);
  void ShowScore(dGameStr& DinoGame);
  void TurboSpeed(dGameStr& DinoGame, int direction, int16_t* sprite);
  void UpdateGameFrame(dGameStr& DinoGame, jumpStr& Dino, aeroStr& Aero, obstStr& obst1, obstStr& obst2, const GameConstStr& GameConst);


  extern const GameInfo GameInfo_Dino;

  //
  static const unsigned char PROGMEM aero1[] = {
  0x01, 0x00, 0x01, 0x80, 0x01, 0xc0, 0x01, 0xc0, 0x19, 0xe0, 0x3d, 0xf0, 0x6d, 0xf8, 0xff, 0xff, 
  0x07, 0xfe, 0x01, 0xf8
  };
  static const unsigned char PROGMEM aero2[] = {
  0x18, 0x00, 0x3c, 0x00, 0x6c, 0x01, 0xff, 0xff, 0x07, 0xfe, 0x00, 0xfc, 0x00, 0x7c, 0x00, 0x3c, 
  0x00, 0x1e, 0x00, 0x0c
  };
  // 
  static const unsigned char PROGMEM aero3[] = {
  0x00, 0x00, 0x01, 0x00, 0x09, 0x80, 0x19, 0xc0, 0x1d, 0xc0, 0x1f, 0xc0, 0x0f, 0xc0, 0x07, 0xc0, 
  0x03, 0xc0, 0x01, 0x80, 0x07, 0x80, 0x0d, 0x00, 0x0f, 0x80, 0x07, 0xc0, 0x03, 0x40, 0x01, 0x40
  };

  static const unsigned char PROGMEM dino1[]={
  // 25x26px
  0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xfe, 0x00, 0x00, 0x06, 0xff, 0x00, 0x00, 0x0e, 0xff, 0x00, 
  0x00, 0x0f, 0xff, 0x00, 0x00, 0x0f, 0xff, 0x00, 0x00, 0x0f, 0xff, 0x00, 0x00, 0x0f, 0xc0, 0x00, 
  0x00, 0x0f, 0xfc, 0x00, 0x40, 0x0f, 0xc0, 0x00, 0x40, 0x1f, 0x80, 0x00, 0x40, 0x7f, 0x80, 0x00, 
  0x60, 0xff, 0xe0, 0x00, 0x71, 0xff, 0xa0, 0x00, 0x7f, 0xff, 0x80, 0x00, 0x7f, 0xff, 0x80, 0x00, 
  0x7f, 0xff, 0x80, 0x00, 0x3f, 0xff, 0x00, 0x00, 0x1f, 0xff, 0x00, 0x00, 0x0f, 0xfe, 0x00, 0x00, 
  0x03, 0xfc, 0x00, 0x00, 0x01, 0xdc, 0x00, 0x00, 0x01, 0x8c, 0x00, 0x00, 0x03, 0x8c, 0x00, 0x00, 
  0x00, 0x0c, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00
  };

  static const unsigned char PROGMEM dino2[]= {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xfe, 0x00, 0x00, 0x06, 0xff, 0x00, 0x00, 0x0e, 0xff, 0x00, 
    0x00, 0x0f, 0xff, 0x00, 0x00, 0x0f, 0xff, 0x00, 0x00, 0x0f, 0xff, 0x00, 0x00, 0x0f, 0xc0, 0x00, 
    0x00, 0x0f, 0xfc, 0x00, 0x80, 0x0f, 0xc0, 0x00, 0x80, 0x1f, 0x80, 0x00, 0xc0, 0x7f, 0xa0, 0x00, 
    0xe0, 0xff, 0xe0, 0x00, 0x71, 0xff, 0xc0, 0x00, 0x7f, 0xff, 0x80, 0x00, 0x7f, 0xff, 0x80, 0x00, 
    0x7f, 0xff, 0x80, 0x00, 0x3f, 0xff, 0x00, 0x00, 0x1f, 0xff, 0x00, 0x00, 0x0f, 0xfe, 0x00, 0x00, 
    0x03, 0xfc, 0x00, 0x00, 0x01, 0xdc, 0x00, 0x00, 0x01, 0x8e, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 
    0x01, 0x80, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00
  };

  static const unsigned char PROGMEM dino3[]= {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xfe, 0x00, 0x00, 0x06, 0xff, 0x00, 0x00, 0x0e, 0xff, 0x00, 
    0x00, 0x0f, 0xff, 0x00, 0x00, 0x0f, 0xff, 0x00, 0x00, 0x0f, 0xff, 0x00, 0x00, 0x0f, 0xc0, 0x00, 
    0x00, 0x0f, 0xfc, 0x00, 0x00, 0x0f, 0xc0, 0x00, 0x00, 0x1f, 0x90, 0x00, 0x80, 0x7f, 0xa0, 0x00, 
    0xc0, 0xff, 0xc0, 0x00, 0x71, 0xff, 0x80, 0x00, 0x7f, 0xff, 0x80, 0x00, 0x7f, 0xff, 0x80, 0x00, 
    0x7f, 0xff, 0x80, 0x00, 0x3f, 0xff, 0x00, 0x00, 0x1f, 0xff, 0x00, 0x00, 0x0f, 0xfe, 0x00, 0x00, 
    0x03, 0xfc, 0x00, 0x00, 0x01, 0xdc, 0x00, 0x00, 0x01, 0x8c, 0x00, 0x00, 0x03, 0x18, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  };

  static const unsigned char PROGMEM obst1[]={
  // 'obst1', 22x23px
	0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0xc0, 0x00, 0x01, 0x88, 0x00, 0x01, 0x9c, 0x00, 0x01, 
	0x9c, 0x00, 0x00, 0xcc, 0x00, 0x00, 0x48, 0x00, 0x00, 0xd8, 0x00, 0x00, 0xd8, 0x00, 0x00, 0xc8, 
	0x00, 0x01, 0x8c, 0x00, 0x01, 0x9c, 0x00, 0x00, 0xdc, 0x00, 0x00, 0x4c, 0x00, 0x01, 0x4c, 0x00, 
	0x01, 0xc8, 0x00, 0x00, 0xd8, 0x00, 0x00, 0xf8, 0x00, 0x00, 0x78, 0x00, 0x00, 0x70, 0x00, 0x00, 
	0x70, 0x00, 0x00, 0x70, 0x00
  };

  static const unsigned char PROGMEM obst2[]={
  // 'obst2', 22x23px
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x20, 0x08, 0x00, 0x60, 0x08, 0x91, 0x20, 0x0c, 0xb3, 0x60, 0x0d, 0xb3, 0x40, 0x0d, 0xb3, 0x40, 
	0x0d, 0xb3, 0x60, 0x0d, 0xb7, 0x30, 0x0f, 0xbe, 0x30, 0x07, 0x3e, 0x60, 0x07, 0x1c, 0x40, 0x02, 
	0x0c, 0x40, 0x07, 0x0c, 0x40
};

static const unsigned char PROGMEM cat1[]={
	// 'cat', 25x26px
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x08, 0x00, 
	0x00, 0x05, 0x14, 0x00, 0x00, 0x04, 0xe2, 0x00, 0x00, 0x08, 0x02, 0x00, 0x00, 0x08, 0xda, 0x00, 
	0x00, 0x08, 0xda, 0x00, 0x00, 0x08, 0x02, 0x00, 0x00, 0x04, 0x22, 0x00, 0x00, 0x02, 0x04, 0x00, 
	0x80, 0xf9, 0x08, 0x00, 0x41, 0x07, 0xf0, 0x00, 0x42, 0x00, 0x40, 0x00, 0x24, 0x00, 0x40, 0x00, 
	0x38, 0x42, 0x20, 0x00, 0x10, 0xf1, 0x20, 0x00, 0x11, 0x0f, 0x90, 0x00, 0x12, 0x00, 0x50, 0x00, 
	0x0a, 0x00, 0x30, 0x00, 0x0f, 0x00, 0x18, 0x00
};

static const unsigned char PROGMEM cat2[]= {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x08, 0x00, 
	0x00, 0x05, 0x14, 0x00, 0x00, 0x04, 0xe2, 0x00, 0x00, 0x08, 0x02, 0x00, 0x00, 0x08, 0x6e, 0x00, 
	0x00, 0x08, 0x6e, 0x00, 0x00, 0x08, 0x02, 0x00, 0x00, 0x04, 0x12, 0x00, 0x00, 0x02, 0x04, 0x00, 
	0x18, 0xf9, 0x08, 0x00, 0x21, 0x07, 0xf0, 0x00, 0x42, 0x00, 0x20, 0x00, 0x44, 0x00, 0x20, 0x00, 
	0x38, 0x00, 0x20, 0x00, 0x10, 0x31, 0x20, 0x00, 0x08, 0x4f, 0x40, 0x00, 0x04, 0x81, 0x40, 0x00, 
	0x02, 0x82, 0x80, 0x00, 0x01, 0xc3, 0x80, 0x00
};

static const unsigned char PROGMEM cat3[]= {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x01, 0x10, 0x00, 0x00, 0x02, 0xe8, 0x00, 0x00, 0x02, 0x04, 0x00, 0x00, 0x04, 0xdc, 0x00, 
	0x00, 0x04, 0x04, 0x00, 0x00, 0x04, 0x24, 0x00, 0x00, 0x02, 0x08, 0x00, 0x00, 0x0f, 0x10, 0x00, 
	0x00, 0x31, 0xfc, 0x00, 0x00, 0x40, 0x02, 0x00, 0x00, 0x80, 0x3c, 0x00, 0x01, 0x04, 0xc0, 0x00, 
	0x02, 0x03, 0x00, 0x00, 0x04, 0x0c, 0x00, 0x00, 0x08, 0x30, 0x00, 0x00, 0x14, 0xc0, 0x00, 0x00, 
	0x29, 0x00, 0x00, 0x00, 0x4a, 0x00, 0x00, 0x00, 0x14, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

const unsigned char PROGMEM murek1 []  = {
  0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0xe8, 0x00, 0x00, 0xa8, 0x00, 0x00, 0xb8, 0x00, 0x00, 
	0xe8, 0x00, 0x00, 0xa8, 0x00, 0x00, 0xb8, 0x00, 0x00, 0xe8, 0x00, 0x00, 0xa8, 0x00, 0x00, 0xb8, 
	0x00, 0x00, 0xe8, 0x00, 0x00, 0xa8, 0x00, 0x00, 0xb8, 0x00, 0x00, 0xe8, 0x00, 0x00, 0xa8, 0x00, 
	0x00, 0xb8, 0x00, 0x00, 0xe8, 0x00, 0x00, 0xa8, 0x00, 0x00, 0xb8, 0x00, 0x00, 0xe8, 0x00, 0x00, 
	0xa8, 0x00, 0x00, 0xb8, 0x00
};
const unsigned char PROGMEM murek2 []  = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0x00, 0x09, 0x24, 0x80, 
	0x1f, 0xff, 0xc0, 0x14, 0x92, 0x40, 0x1f, 0xff, 0xc0, 0x12, 0x49, 0x40, 0x1f, 0xff, 0xc0, 0x14, 
	0x92, 0x40, 0x1f, 0xff, 0xc0
};

const unsigned char PROGMEM bird1 []  = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x04, 0x48, 0x0e, 0x90, 0x1f, 0xe0, 0x00, 0x10, 
	0x00, 0x00, 0x00, 0x00
};

const unsigned char PROGMEM bird2 []  = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x78, 0x0a, 0xfe, 0x1f, 0xe0, 0x00, 0x10, 
	0x00, 0x00, 0x00, 0x00
};

const unsigned char PROGMEM bird3 []  = {
	0x00, 0x20, 0x00, 0x68, 0x00, 0xf0, 0x00, 0xf0, 0x00, 0xe0, 0x00, 0x40, 0x03, 0xc0, 0x02, 0xc0, 
	0x03, 0x80, 0x00, 0x80
};
#endif
